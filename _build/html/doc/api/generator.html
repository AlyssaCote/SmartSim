

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Generator &mdash; SmartSim 0.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Controller" href="controller.html" />
    <link rel="prev" title="SmartSimModule" href="simModule.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> SmartSim
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../generate.html">Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simulate.html">Simulation Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers.html">Developer</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/cp2k.html">Ensembling CP2K Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/online-training.html">Use Machine Learning In Simulation</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="state.html">State</a></li>
<li class="toctree-l1"><a class="reference internal" href="simModule.html">SmartSimModule</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="controller.html">Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utilities</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SmartSim</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Generator</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/doc/api/generator.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="generator">
<h1>Generator<a class="headerlink" href="#generator" title="Permalink to this headline">¶</a></h1>
<p>To efficently run a number of models, the model input files and configurations must
be duplicated and modified automatically. The Generator module allows users to
rapidly generate and configure models through two APIs: Python and TOML.</p>
<p>The experiment structure generated by this module is reflected in the code block below.
Experiments hold targets and targets hold actual models. Targets are groupings of
similar models whose configurations are largely the same. For example, targets may
fix resolutions or grid configurations while models hold various tunable parameter
values.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>lammps_atm/                  (experiment name)
  └── atm                    (target name)
      ├── atm_0              (model name)
      │    └── in.atm
      └── atm_1              (model name)
           └── in.atm
</pre></div>
</div>
<p>A configuration file for this generation could look like the following when generated
with the all permutations strategy.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[model]</span>
<span class="n">name</span> <span class="o">=</span> <span class="s">&quot;lammps&quot;</span>
<span class="n">targets</span> <span class="o">=</span> <span class="k">[&quot;atm&quot;]</span>
<span class="n">experiment</span> <span class="o">=</span> <span class="s">&quot;lammps_atm&quot;</span>
<span class="n">configs</span> <span class="o">=</span> <span class="k">[&quot;in.atm&quot;]</span>

<span class="k">[atm]</span>
  <span class="p">[</span><span class="n">atm</span><span class="p">.</span><span class="n">lj</span><span class="p">]</span>              <span class="c1"># lj is the previous value marked in &quot;in.atm&quot; (e.g. ;lj;)</span>
  <span class="n">value</span> <span class="o">=</span> <span class="k">[&quot;ls&quot;, &quot;ld&quot;]</span>
</pre></div>
</div>
<p>To generate the same experiment in python, the following code could be used.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartsim</span> <span class="kn">import</span> <span class="n">State</span><span class="p">,</span> <span class="n">Generator</span>
<span class="n">state</span> <span class="o">=</span> <span class="n">State</span><span class="p">(</span><span class="n">experiment</span><span class="o">=</span><span class="s2">&quot;lammps_atm&quot;</span><span class="p">)</span>
<span class="n">target_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;lj&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;ls&quot;</span><span class="p">,</span> <span class="s2">&quot;ld&quot;</span><span class="p">]}</span>
<span class="n">state</span><span class="o">.</span><span class="n">create_target</span><span class="p">(</span><span class="s2">&quot;atm&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">target_params</span><span class="p">}</span>

<span class="n">gen</span> <span class="o">=</span> <span class="n">Generator</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">model_files</span><span class="o">=</span><span class="s2">&quot;in.atm&quot;</span><span class="p">)</span>
<span class="n">gen</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</pre></div>
</div>
<span class="target" id="module-smartsim.generation.generator"></span><dl class="class">
<dt id="smartsim.generation.generator.Generator">
<em class="property">class </em><code class="sig-prename descclassname">smartsim.generation.generator.</code><code class="sig-name descname">Generator</code><span class="sig-paren">(</span><em class="sig-param">state</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/smartsim/generation/generator.html#Generator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smartsim.generation.generator.Generator" title="Permalink to this definition">¶</a></dt>
<dd><p>A SmartSimModule that configures and generates instances of a model by reading
and writing model files that have been tagged by the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>state</strong> (<a class="reference internal" href="state.html#smartsim.state.State" title="smartsim.state.State"><em>State</em></a>) – A State instance</p>
</dd>
</dl>
<dl class="method">
<dt id="smartsim.generation.generator.Generator.generate">
<code class="sig-name descname">generate</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/smartsim/generation/generator.html#Generator.generate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smartsim.generation.generator.Generator.generate" title="Permalink to this definition">¶</a></dt>
<dd><p>Based on the targets and models created by the user through the python
or TOML interface, configure and generate the model instances.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>SmartSimError</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smartsim.generation.generator.Generator.set_strategy">
<code class="sig-name descname">set_strategy</code><span class="sig-paren">(</span><em class="sig-param">permutation_strategy</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/smartsim/generation/generator.html#Generator.set_strategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smartsim.generation.generator.Generator.set_strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the strategy for generating model configurations based on the
values of the target parameters.</p>
<p>all_perm creates all possible permutations of the target parameters as
individual models. This is the default strategy for the Generator module.</p>
<p>Calling with a string formatted as “module.function” attempts to use the
function, <cite>function</cite>, from the module, <cite>module</cite>.</p>
<p>Calling with a callable function results in that function being used as
the permutation strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>permutation_strategy</strong> (<em>str</em>) – Options are “all_perm”, “step”, “random”,
“module.function”, or a callable function.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smartsim.generation.generator.Generator.set_tag">
<code class="sig-name descname">set_tag</code><span class="sig-paren">(</span><em class="sig-param">tag</em>, <em class="sig-param">regex=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/smartsim/generation/generator.html#Generator.set_tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smartsim.generation.generator.Generator.set_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a tag or a regular expression for the generator to look for when
configuring new models.</p>
<p>For example, a tag might be <code class="docutils literal notranslate"><span class="pre">;</span></code> where the expression being replaced
in the model configuration file would look like <code class="docutils literal notranslate"><span class="pre">;expression;</span></code></p>
<p>A full regular expression might tag specific model configurations such
that the configuration files don’t need to be tagged manually.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> (<em>str</em>) – A string of characters that signify an string to be changed.
Defaults to <code class="docutils literal notranslate"><span class="pre">;</span></code></p></li>
<li><p><strong>regex</strong> (<em>str</em>) – a regular expression that model files are tagged with</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="controller.html" class="btn btn-neutral float-right" title="Controller" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="simModule.html" class="btn btn-neutral float-left" title="SmartSimModule" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Sam Partee

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>