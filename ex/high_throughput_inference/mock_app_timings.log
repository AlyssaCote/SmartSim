from mock_app


ProtoClient

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
    63    670.7 MiB    670.7 MiB           1       @profile
    64                                             def __init__(self, timing_on: bool):
    65    670.7 MiB      0.0 MiB           1           comm = MPI.COMM_WORLD
    66    670.7 MiB      0.0 MiB           1           rank = comm.Get_rank()
    67    671.7 MiB      0.9 MiB           1           connect_to_infrastructure()
    68    671.7 MiB      0.0 MiB           1           ddict_str = os.environ["_SMARTSIM_INFRA_BACKBONE"]
    69    673.1 MiB      1.4 MiB           1           self._ddict = DDict.attach(ddict_str)
    70    673.1 MiB      0.0 MiB           1           self._backbone_descriptor = DragonFeatureStore(self._ddict).descriptor
    71    673.1 MiB      0.0 MiB           1           to_worker_fli_str = None
    72    673.5 MiB      0.0 MiB           2           while to_worker_fli_str is None:
    73    673.1 MiB      0.0 MiB           1               try:
    74    673.5 MiB      0.4 MiB           1                   to_worker_fli_str = self._ddict["to_worker_fli"]
    75    673.5 MiB      0.0 MiB           1                   self._to_worker_fli = fli.FLInterface.attach(to_worker_fli_str)
    76                                                     except KeyError:
    77                                                         time.sleep(1)
    78    673.5 MiB      0.1 MiB           1           self._from_worker_ch = Channel.make_process_local()
    79    673.5 MiB      0.0 MiB           1           self._from_worker_ch_serialized = self._from_worker_ch.serialize()
    80    673.6 MiB      0.1 MiB           1           self._to_worker_ch = Channel.make_process_local()
    81                                         
    82    673.6 MiB      0.0 MiB           1           self.perf_timer: PerfTimer = PerfTimer(debug=False, timing_on=timing_on, prefix=f"a{rank}_")

run_model
Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   136    675.3 MiB    675.3 MiB           1       @profile
   137                                             def set_model(self, key: str, model: bytes):
   138    773.6 MiB     98.3 MiB           1           self._ddict[key] = model




ResNetWrapper

init
get_batch
run_model
name